<html>

<head>
  <style>
  #player {
    --theme-hue: 100;
    --progress-color: rgb(0, 255, 0);
    --splash-image: url('http://via.placeholder.com/700?text=Splash%20Image.jpg');
    --watermark-image: url('http://via.placeholder.com/700?text=Watermark%20Image.jpg');
    --buffering-image: url('http://via.placeholder.com/700?text=Buffering%20Image.jpg');
    --pause-image: url('http://via.placeholder.com/700?text=Pause%20Image.jpg');
    --play-image: url('http://via.placeholder.com/700?text=Play%20Image.jpg');
    --logo-image: url('logo.png?a=d');
    --spinner-image: url('ajax-loader.gif?a=c');
    --progress-color: hsl(180, 50%, 50%);
  }
  </style>
  <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js">
  </script>
</head>

<body>
  <cast-media-player></cast-media-player>
  <script>
  const context = cast.framework.CastReceiverContext.getInstance();
  const playerManager = context.getPlayerManager();

  // intercept the LOAD request to be able to read in a contentId and get data
  /*playerManager.setMessageInterceptor(
      cast.framework.messages.MessageType.LOAD, loadRequestData => {
          if (loadRequestData.media && loadRequestData.media.contentId) {
              return thirdparty.getMediaById(loadRequestData.media.contentId)
              .then(media => {
                if (media) {
                  loadRequestData.media.contentUrl = media.url;
                  loadRequestData.media.contentType = media.contentType;
                  loadRequestData.media.metadata = media.metadata;
                }
                return loadRequestData;
              });
          }
          return loadRequestData;
      });*/

  // listen to all Core Events
  playerManager.addEventListener(cast.framework.events.category.CORE,
    event => {
      console.log("CHROMECAST : ", event);
    });

  function addBreakToMedia(media) {
    media.breakClips = [{
        id: 'bc1',
        title: "HELLOO",
        contentId: "https://pubads.g.doubleclick.net/gampad/ads?sz=320x480%7C400x300%7C420x320%7C300x415%7C320x240%7C554x416%7C480x320%7C300x400%7C400x315%7C640x360%7C640x480%7C320x195%7C420x315%7C480x480&iu=%2F7176%2FEconomictimes%2FET_ROS_VDO%2FET_Video_VideoShow_preroll&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=https%3A%2F%2Feconomictimes.indiatimes.com%2Fvideodash.cms%3Fautostart%3D1%26msid%3D61912017%26rlvideo%3D4424867%26skipad%3Dfalse&description_url=%5Bdescription_url%5D&correlator=734562991258564&cust_params=pid%3D_%26section%3DET%20NOW%2CET%20NOW_Daily%26vendor%3D2%26&eid=420706009%2C509445015&sdkv=h.3.185.2&sdki=3c0d&scor=2944737748340473&adk=1233563041&u_so=l&osd=2&frm=2&sdr=1&ged=ve4_td2_tt1_pd2_la2000_er0.0.0.0_vi0.0.642.854_vp0_eb16747",
        //contentType: "",
        //posterUrl: "",
        whenSkippable: 10
      },
    ];
    media.breaks = [{
        id: 'b1',
        breakClipIds: ['bc1'],
        position: 3000
      }
    ];
  }
  playerManager.setMessageInterceptor(
    cast.framework.messages.MessageType.LOAD,ert
    request => {
      console.log("request.media = ",request.media);
      addBreakToMedia(request.media);
      console.log("request.media = ",request.media);
      return request;
    });
  context.start();
  </script>
</body>

</html>